{"ast":null,"code":"var _jsxFileName = \"/work/self_learning/docker_img_builder/client/src/components/SelectOS.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { changeName, changeTag, initializeForm } from '../actions';\nimport './App.css';\n\nconst SelectOS = ({\n  store\n}) => {\n  const _store$getState$form = store.getState().form,\n        osName = _store$getState$form.osName,\n        osTag = _store$getState$form.osTag; // const fileName = osName + \"_\" + osTag + \".tar\";\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    axios.post('/api/imgInfo', {\n      osName,\n      osTag\n    }).then(response => {\n      console.log(response);\n      store.dispatch(initializeForm());\n    }).catch(err => {\n      console.error(new Error(err));\n    });\n  };\n\n  const handleDownload = e => {\n    e.preventDefault();\n\n    const _axios$post = axios.post('/api/download', {\n      responseType: 'arraybuffer',\n      headers: {\n        Accept: 'application/zip'\n      },\n      osName,\n      osTag\n    }),\n          data = _axios$post.data;\n\n    console.log(data.headers);\n    console.log(data);\n    console.log(data.headers['content-disposition'].split('filename=')[1]);\n    const link = document.createElement('a');\n    const blob = new Blob([data], {\n      type: 'application/zip'\n    });\n    link.setAttribute('href', window.URL.createObjectURL(blob));\n    link.setAttribute('download', data.headers['content-disposition'].split('filename=')[1]);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    store.dispatch(initializeForm());\n  };\n\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"header\", {\n    className: \"App-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: e => handleSubmit(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"CentOS\", React.createElement(\"input\", {\n    type: \"radio\",\n    value: \"centos\",\n    checked: osName === 'centos',\n    onChange: () => store.dispatch(changeName(\"centos\")),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Ubuntu\", React.createElement(\"input\", {\n    type: \"radio\",\n    value: \"ubuntu\",\n    checked: osName === 'ubuntu',\n    onChange: () => store.dispatch(changeName(\"ubuntu\")),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"latest\", React.createElement(\"input\", {\n    type: \"radio\",\n    value: \"latest\",\n    checked: osTag === 'latest',\n    onChange: () => store.dispatch(changeTag(\"latest\")),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"submit\")), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: e => handleDownload(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"download\")));\n};\n\nexport default SelectOS;","map":{"version":3,"sources":["/work/self_learning/docker_img_builder/client/src/components/SelectOS.js"],"names":["React","axios","changeName","changeTag","initializeForm","SelectOS","store","getState","form","osName","osTag","handleSubmit","e","preventDefault","post","then","response","console","log","dispatch","catch","err","error","Error","handleDownload","responseType","headers","Accept","data","split","link","document","createElement","blob","Blob","type","setAttribute","window","URL","createObjectURL","style","visibility","body","appendChild","click","removeChild"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport {\n    changeName, changeTag,\n    initializeForm\n } from '../actions'\nimport './App.css'\n\nconst SelectOS = ({ store }) => {\n    const { osName, osTag } = store.getState().form;\n    // const fileName = osName + \"_\" + osTag + \".tar\";\n\n    const handleSubmit = e => {\n        e.preventDefault()\n\n        axios.post('/api/imgInfo', {\n            osName,\n            osTag,\n        })\n        .then(response => {\n            console.log(response)\n            store.dispatch(initializeForm())\n        })\n        .catch(err => {\n            console.error(new Error(err))\n        })\n    }\n\n    const handleDownload = e => {\n        e.preventDefault();\n\n        const { data } = axios.post('/api/download', {\n            responseType: 'arraybuffer',\n            headers: { Accept: 'application/zip' },\n            osName,\n            osTag,\n        })\n        console.log(data.headers);\n        console.log(data);\n        console.log(data.headers['content-disposition'].split('filename=')[1]);\n\n        const link = document.createElement('a');\n        const blob = new Blob([data], { type: 'application/zip' });\n        link.setAttribute('href', window.URL.createObjectURL(blob));\n        link.setAttribute('download', data.headers['content-disposition'].split('filename=')[1]);\n        link.style.visibility = 'hidden';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        store.dispatch(initializeForm())\n    }\n\n    return (\n        <div className=\"App\">\n            <header className=\"App-header\">\n                <form onSubmit={e => handleSubmit(e)}>\n                    <label>\n                        CentOS\n                        <input\n                            type=\"radio\"\n                            value=\"centos\"\n                            checked={osName === 'centos'}\n                            onChange={() => store.dispatch(changeName(\"centos\"))}>\n                        </input>\n                    </label>\n                    <label>\n                        Ubuntu\n                        <input\n                            type=\"radio\"\n                            value=\"ubuntu\"\n                            checked={osName === 'ubuntu'}\n                            onChange={() => store.dispatch(changeName(\"ubuntu\"))}>\n                        </input>\n                    </label>\n                    <br></br>\n                    <label>\n                        latest\n                        <input\n                            type=\"radio\"\n                            value=\"latest\"\n                            checked={osTag === 'latest'}\n                            onChange={() => store.dispatch(changeTag(\"latest\"))}>\n                        </input>\n                    </label>\n                    <br></br>\n                    <button type=\"submit\">submit</button>\n                </form>\n                <button type=\"button\" onClick={e => handleDownload(e)}>download</button>\n            </header>\n        </div>\n    )\n}\n\nexport default SelectOS"]},"metadata":{},"sourceType":"module"}