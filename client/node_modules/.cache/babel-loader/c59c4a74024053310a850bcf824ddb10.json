{"ast":null,"code":"var _jsxFileName = \"/docker_img_builder/client/src/components/SelectOS.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Button, Card, CardContent, FormLabel, FormControl, FormControlLabel, Radio, RadioGroup } from '@material-ui/core';\nimport { changeName, changeTag, initializeForm } from '../actions';\nimport './App.css';\n\nconst SelectOS = ({\n  store\n}) => {\n  const _store$getState$form = store.getState().form,\n        osName = _store$getState$form.osName,\n        osTag = _store$getState$form.osTag;\n\n  const handleChangeOS = e => {\n    store.dispatch(changeName(e.target.value));\n  };\n\n  const handleChangeTag = e => {\n    store.dispatch(changeTag(e.target.value));\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    axios.post('/api/imgInfo', {\n      osName,\n      osTag\n    }).then(response => {\n      console.log(response);\n      store.dispatch(initializeForm());\n    }).catch(err => {\n      console.error(new Error(err));\n    });\n  };\n\n  const handleDownload = e => {\n    e.preventDefault();\n    axios.get('/api/download', {\n      responseType: 'blob',\n      params: {\n        osName,\n        osTag\n      }\n    }).then(response => {\n      const link = document.createElement('a');\n      const blob = new Blob([response.data]);\n      link.setAttribute('href', window.URL.createObjectURL(blob));\n      link.setAttribute('download', response.headers['content-disposition'].split('filename=')[1]);\n      link.style.visibility = 'hidden';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      store.dispatch(initializeForm());\n    }).catch(err => {\n      console.error(new Error(err));\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"header\", {\n    className: \"App-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(FormControl, {\n    component: \"fieldset\",\n    onSubmit: e => handleSubmit(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"flex\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(Card, {\n    className: \"card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(CardContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(FormLabel, {\n    component: \"legend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"OS\"), React.createElement(RadioGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(FormControlLabel, {\n    value: \"centos\",\n    control: React.createElement(Radio, {\n      checked: osName === 'centos',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }),\n    onChange: handleChangeOS,\n    label: \"CentOS\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), React.createElement(FormControlLabel, {\n    value: \"ubuntu\",\n    control: React.createElement(Radio, {\n      checked: osName === 'ubuntu',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }),\n    onChange: handleChangeOS,\n    label: \"Ubuntu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  })))), React.createElement(Card, {\n    className: \"card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(CardContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(FormLabel, {\n    component: \"legend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"TAG\"), React.createElement(RadioGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(FormControlLabel, {\n    value: \"latest\",\n    control: React.createElement(Radio, {\n      checked: osTag === 'latest',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }),\n    onChange: handleChangeTag,\n    label: \"latest\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }))))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"create\"))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"contained\",\n    color: \"default\",\n    type: \"button\",\n    onClick: e => handleDownload(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"download\"))));\n};\n\nexport default SelectOS;","map":{"version":3,"sources":["/docker_img_builder/client/src/components/SelectOS.js"],"names":["React","axios","Button","Card","CardContent","FormLabel","FormControl","FormControlLabel","Radio","RadioGroup","changeName","changeTag","initializeForm","SelectOS","store","getState","form","osName","osTag","handleChangeOS","e","dispatch","target","value","handleChangeTag","handleSubmit","preventDefault","post","then","response","console","log","catch","err","error","Error","handleDownload","get","responseType","params","link","document","createElement","blob","Blob","data","setAttribute","window","URL","createObjectURL","headers","split","style","visibility","body","appendChild","click","removeChild"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport {\n    Button, Card, CardContent,\n    FormLabel, FormControl, FormControlLabel,\n    Radio, RadioGroup,\n    \n} from '@material-ui/core'\nimport {\n    changeName, changeTag,\n    initializeForm\n } from '../actions'\nimport './App.css'\n\nconst SelectOS = ({ store }) => {\n    const { osName, osTag } = store.getState().form;\n\n    const handleChangeOS = e => {\n        store.dispatch(changeName(e.target.value));\n    }\n\n    const handleChangeTag = e => {\n        store.dispatch(changeTag(e.target.value));\n    }\n\n    const handleSubmit = e => {\n        e.preventDefault()\n\n        axios.post('/api/imgInfo', {\n            osName,\n            osTag,\n        })\n        .then(response => {\n            console.log(response)\n            store.dispatch(initializeForm())\n        })\n        .catch(err => {\n            console.error(new Error(err))\n        })\n    }\n\n    const handleDownload = e => {\n        e.preventDefault();\n\n        axios.get('/api/download', {\n            responseType: 'blob',\n            params: { osName, osTag }\n        })\n        .then(response => {\n            const link = document.createElement('a');\n            const blob = new Blob([response.data]);\n            link.setAttribute('href', window.URL.createObjectURL(blob));\n            link.setAttribute('download', response.headers['content-disposition'].split('filename=')[1]);\n            link.style.visibility = 'hidden';\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n\n            store.dispatch(initializeForm())\n        })\n        .catch(err => {\n            console.error(new Error(err))\n        })\n    }\n\n    return (\n        <div className=\"App\">\n            <header className=\"App-header\">\n                <FormControl component=\"fieldset\" onSubmit={e => handleSubmit(e)}>\n                    <div className=\"flex\">\n                        <Card className=\"card\">\n                            <CardContent>\n                                <FormLabel component=\"legend\">OS</FormLabel>\n                                <RadioGroup>\n                                    <FormControlLabel \n                                        value=\"centos\"\n                                        control={<Radio checked={osName === 'centos'} />}\n                                        onChange={handleChangeOS}\n                                        label=\"CentOS\" />\n                                    <FormControlLabel\n                                        value=\"ubuntu\"\n                                        control={<Radio checked={osName === 'ubuntu'} />}\n                                        onChange={handleChangeOS}\n                                        label=\"Ubuntu\" />\n                                </RadioGroup>\n                            </CardContent>\n                        </Card>\n                        <Card className=\"card\">\n                            <CardContent>\n                                <FormLabel component=\"legend\">TAG</FormLabel>\n                                <RadioGroup>\n                                    <FormControlLabel\n                                        value=\"latest\"\n                                        control={<Radio checked={osTag === 'latest'} />}\n                                        onChange={handleChangeTag}\n                                        label=\"latest\" />\n                                </RadioGroup>\n                            </CardContent>\n                        </Card>\n                    </div>\n                    <div>\n                        <Button variant=\"contained\" color=\"primary\" type=\"submit\">create</Button>\n                    </div>\n                </FormControl>\n                <div>\n                    <Button variant=\"contained\" color=\"default\" type=\"button\" onClick={e => handleDownload(e)}>\n                        download\n                    </Button>\n                </div>\n            </header>\n        </div>\n    )\n}\n\nexport default SelectOS"]},"metadata":{},"sourceType":"module"}